


ARM Macro Assembler    Page 1 


    1 00000000         ;*******************************************************
                       ******************
    2 00000000         ;                È«¾Ö±äÁ¿£¬´Ócpuport.cÖĞµ¼Èë
    3 00000000         ;*******************************************************
                       ******************
    4 00000000         ;ÓÃÓÚ´æ´¢ÉÏÒ»¸öÏß³ÌµÄspµÄÖ¸Õë
    5 00000000                 IMPORT           rt_interrupt_from_thread
    6 00000000         ;ÓÃÓÚ´æ´¢ÏÂÒ»¸ö½«ÒªÔËĞĞµÄÏß³ÌµÄspÖ¸Õë
    7 00000000                 IMPORT           rt_interrupt_to_thread
    8 00000000         ;PendSVÖĞ¶Ï·şÎñº¯ÊıÖ´ĞĞµÄ±êÖ¾
    9 00000000                 IMPORT           rt_thread_switch_interrupt_flag
   10 00000000         
   11 00000000         
   12 00000000         ;*******************************************************
                       ******************
   13 00000000         ;                 ³£Á¿£¬ÓĞ¹ØÄÚºËÍâÉè¼Ä´æÆ÷
   14 00000000         ;      ÏµÍ³¿ØÖÆ¿éÍâÉèSCBµØÖ··¶Î§0XE000ED00~0XE000ED3F
   15 00000000         ;*******************************************************
                       ******************
   16 00000000 E000ED08 
                       SCB_VTOR
                               EQU              0XE000ED08  ;ÏòÁ¿±íÆ«ÒÆ¼Ä´æÆ÷
   17 00000000 E000ED04 
                       NVIC_INT_CTRL
                               EQU              0XE000ED04  ;ÖĞ¶Ï¿ØÖÆ×´Ì¬¼Ä´æÆ÷
                                                            
   18 00000000 E000ED20 
                       NVIC_SYSPRI2
                               EQU              0XE000ED20  ;ÏµÍ³ÓÅÏÈ¼¶¼Ä´æÆ÷
   19 00000000 00FF0000 
                       NVIC_PENDSV_PRI
                               EQU              0X00FF0000  ;PendSV ÓÅÏÈ¼¶Öµ£¨l
                                                            owest£©
   20 00000000 10000000 
                       NVIC_PENDSVSET
                               EQU              0X10000000  ;´¥·¢PendSV excepti
                                                            onµÄÖµ
   21 00000000         
   22 00000000         
   23 00000000         ;*******************************************************
                       ******************
   24 00000000         ;                  ´úÂë²úÉúÖ¸Áî
   25 00000000         ;*******************************************************
                       ******************
   26 00000000         
   27 00000000                 AREA             |.text|, CODE, READONLY, ALIGN=
2
   28 00000000                 THUMB
   29 00000000                 REQUIRE8
   30 00000000                 PRESERVE8
   31 00000000         
   32 00000000         ;*******************************************************
                       ******************
   33 00000000         ;           º¯ÊıÔ­ĞÍ£ºrt_base_t rt_hw_interrupt_disable(
                       )
   34 00000000         ;   ¹ØÖĞ¶Ï   
   35 00000000         ;*******************************************************
                       ******************
   36 00000000         rt_hw_interrupt_disable



ARM Macro Assembler    Page 2 


                               PROC
   37 00000000                 EXPORT           rt_hw_interrupt_disable
   38 00000000         ;r0»á×÷Îªº¯ÊıµÄ·µ»ØÖµ£¬ĞèÒªÊÂÏÈÉùÃ÷Ò»¸ö±äÁ¿´æ´¢º¯ÊıµÄ·µ»
                       ØÖµ(PRIMASK)
   39 00000000 F3EF 8010       MRS              r0,PRIMASK
   40 00000004 B672            CPSID            I
   41 00000006 4770            BX               LR
   42 00000008                 ENDP
   43 00000008         
   44 00000008         ;*******************************************************
                       ******************
   45 00000008         ;           º¯ÊıÔ­ĞÍ£ºvoid rt_hw_interrupt_enable(rt_bas
                       e_t level)
   46 00000008         ;   ¿ªÖĞ¶Ï   
   47 00000008         ;*******************************************************
                       ******************
   48 00000008         rt_hw_interrupt_enable
                               PROC
   49 00000008                 EXPORT           rt_hw_interrupt_enable
   50 00000008 F380 8810       MSR              PRIMASK, r0
   51 0000000C 4770            BX               LR
   52 0000000E                 ENDP
   53 0000000E         
   54 0000000E         
   55 0000000E         ;*******************************************************
                       ******************
   56 0000000E         ;           º¯ÊıÔ­ĞÍ£ºvoid rt_hw_context_switch_to(rt_ui
                       nt32_t to)
   57 0000000E         ;   r0 --> to
   58 0000000E         ;   ¸Ãº¯ÊıÓÃÓÚ¿ªÆôµÚÒ»´ÎÏß³ÌÇĞ»»
   59 0000000E         ;*******************************************************
                       ******************
   60 0000000E         
   61 0000000E         rt_hw_context_switch_to
                               PROC
   62 0000000E         
   63 0000000E         ;µ¼³ört_hw_context_switch_to£¬Ê¹Æä¾ßÓĞÈ«¾ÖÊôĞÔ£¬¿ÉÒÔÔÚCÎ
                       Ä¼şÖĞµ÷ÓÃ£¬µ«ÊÇ±ØĞëÔÚrthw.hÎÄ¼şÖĞÉùÃ÷
   64 0000000E                 EXPORT           rt_hw_context_switch_to
   65 0000000E         
   66 0000000E         ;½«rt_interrupt_to_threadµÄµØÖ·¼ÓÔØµ½r1£¬×¢ÒâÕâ±ßµÄµÈÓÚ£
                       ¬LDR Rd£¬=Label£¬ÕâÀïµÄLDR[Î±Ö¸Áî]£¬Èç¹ûlabelÊÇ¸ö±êÊ¶·û£
                       ¨±ÈÈçÖ¸Õë£©£¬Ôò»á´«ÈëÖ¸ÕëµÄµØÖ·
   67 0000000E         ;ÄÇÃ´´ËÊ±rt_interrupt_to_threadÖ¸ÏòÕâ¸ösp£¬È»ºóspÔÙÖ¸ÏòÄ
                       Ú´æÖĞµÄÖµ
   68 0000000E 4923            LDR              r1, =rt_interrupt_to_thread
   69 00000010         ;½«r0µÄÖµ´æ´¢µ½rt_interrupt_to_thread£¬ÆäÖĞr0´æ´¢µÄÖµÊÇÏ
                       ÂÒ»¸öÒªÔËĞĞµÄÏß³ÌµÄspµÄµØÖ·£¬
   70 00000010         ;ÓÉ¸Ãº¯Êırt_hw_context_switch_to((rt_uint32_t)&to_thread
                       ->sp)µ÷ÓÃÊ±´«Èëµ½r0
   71 00000010 6008            STR              r0,[r1]
   72 00000012         
   73 00000012         ;ÉèÖÃrt_interrupt_from_threadµÄÖµÎª0£¬±íÊ¾Æô¶¯µÚÒ»´ÎÏß³Ì
                       ÇĞ»»
   74 00000012         ;½«rt_interrupt_from_threadµÄµØÖ·¼ÓÔØµ½r1
   75 00000012 4923            LDR              r1, =rt_interrupt_from_thread
   76 00000014         ;ÅäÖÃr0µÈÓÚ0
   77 00000014 F04F 0000       MOV              r0,#0x0
   78 00000018         ;½«r0µÄÖµ´æ´¢µ½rt_interrupt_from_thread



ARM Macro Assembler    Page 3 


   79 00000018 6008            STR              r0,[r1]
   80 0000001A         
   81 0000001A         ;ÉèÖÃÖĞ¶Ï±êÖ¾Î»rt_thread_switch_interrupt_flagµÄÖµÎª1
   82 0000001A         ;½«rt_thread_switch_interrupt_flagµÄµØÖ·¼ÓÔØµ½r1
   83 0000001A 4922            LDR              r1, =rt_thread_switch_interrupt
_flag
   84 0000001C         ;ÅäÖÃr0µÈÓÚ1
   85 0000001C F04F 0001       MOV              r0, #1
   86 00000020         ;½«r0µÄÖµ´æ´¢µ½rt_thread_switch_interrupt_flagÖĞ
   87 00000020 6008            STR              r0,[r1]
   88 00000022         
   89 00000022         ;ÉèÖÃ PendSV Òì³£µÄÓÅÏÈ¼¶
   90 00000022 4821            LDR              r0, =NVIC_SYSPRI2 ;½«Ç¶Ì×ÖĞ¶ÏÏò
                                                            Á¿¿ØÖÆÆ÷µÄ¿ØÖÆÓÅÏÈ¼
                                                            ¶µÄ¼Ä´æÆ÷µØÖ·¼ÓÔØµ½
                                                            r0
   91 00000024 F44F 017F       LDR              r1, =NVIC_PENDSV_PRI ;½«ÓÅÏÈ¼¶µ
                                                            ÄÖµ¼ÓÔØµ½r1
   92 00000028 F8D0 2000       LDR.W            r2, [r0,#0x00] ;¸ÃÃüÁî¶ÁÈ¡NVIC_
                                                            SYSPRI2µÄÖµµ½r2£¨.W
                                                            ÊÇLDRµÄ×ÖÀ©Õ¹£¬±£Ö¤
                                                            ¼ÓÔØµÄÊÇÒ»¸öWord×Ö¡
                                                            ££©
   93 0000002C EA41 0102       ORR              r1,r1,r2    ;¶Ôr1ºÍr2½øĞĞ¡°»ò¡±
                                                            ÔËĞĞËã£¬È»ºó½«½á¹û·
                                                            Åµ½r1ÖĞ
   94 00000030 6001            STR              r1, [r0]    ;½«r1µÄÖµ£¨ĞŞ¸ÄÍê±Ï
                                                            µÄÓÅÏÈ¼¶µÄÖµ£©¸³¸øN
                                                            VIC_SYSPRI2
   95 00000032         
   96 00000032         ;´¥·¢ PendSV Òì³££¨²úÉúÉÏÏÂÎÄÇĞ»»£©
   97 00000032 481E            LDR              r0, =NVIC_INT_CTRL
   98 00000034 F04F 5180       LDR              r1, =NVIC_PENDSVSET ;ÕâÊÇÒ»¸öÌØ
                                                            ÊâµÄÖµ£¬ÓÃÓÚ´¥·¢ Pe
                                                            ndSV Òì³£
   99 00000038 6001            STR              r1, [r0]
  100 0000003A         
  101 0000003A         ;¿ªÖĞ¶Ï¡£CPSIEµÄÈ«Æ´ÊÇ¡°Change Processor State, Interrup
                       t Enable¡±£¬ºóÃæµÄ²ÎÊıF´ú±íFIQ£¨¿ìËÙÖĞ¶ÏÏìÓ¦£©£¬²ÎÊıI´ú±
                       íIRQ£¨ÆÕÍ¨ÖĞ¶ÏÏìÓ¦£©¡£
  102 0000003A B661            CPSIE            F
  103 0000003C B662            CPSIE            I
  104 0000003E         
  105 0000003E         ;ÓÀÔ¶ÎŞ·¨µ½´ïµÄÎ»ÖÃ,ÓëPROC³É¶Ô³öÏÖ,End Procedure
  106 0000003E                 ENDP
  107 0000003E         
  108 0000003E         
  109 0000003E         ;/*
  110 0000003E         ; *-----------------------------------------------------
                       ------------------
  111 0000003E         ; * void rt_hw_context_switch(rt_uint32 from, rt_uint32 
                       to);
  112 0000003E         ; * r0 --> from
  113 0000003E         ; * r1 --> to
  114 0000003E         ; *-----------------------------------------------------
                       ------------------
  115 0000003E         ; */
  116 0000003E         rt_hw_context_switch
                               PROC



ARM Macro Assembler    Page 4 


  117 0000003E                 EXPORT           rt_hw_context_switch
  118 0000003E         
  119 0000003E         ;ÉèÖÃÖĞ¶Ï±êÖ¾Î»rt_thread_switch_interrupt_flagÎª1
  120 0000003E         ;¼ÓÔØrt_thread_switch_interrupt_flagµÄµØÖ·µ½r2
  121 0000003E 4A19            LDR              r2, =rt_thread_switch_interrupt
_flag
  122 00000040         ;¼ÓÔØrt_thread_switch_interrupt_flagµÄÖµµ½r2
  123 00000040 6813            LDR              r3, [r2]
  124 00000042         ;r3Óë1±È½Ï£¬ÏàµÈÔòÖ´ĞĞBEQÃüÁî
  125 00000042 2B01            CMP              r3, #1
  126 00000044 D004            BEQ              _reswitch
  127 00000046         ;ÉèÖÃr3µÄÖµÎª1
  128 00000046 F04F 0301       MOV              r3, #1
  129 0000004A         ;½«rt_thread_switch_interrupt_flagµÄÖµÖÃ1
  130 0000004A 6013            STR              r3, [r2]
  131 0000004C         
  132 0000004C         ;ÉèÖÃrt_interrupt_from_threadµÄÖµ
  133 0000004C 4A14            LDR              r2, =rt_interrupt_from_thread ;
                                                             ¼ÓÔØrt_interrupt_f
                                                            rom_threadµÄµØÖ·µ½r
                                                            2
  134 0000004E 6010            STR              r0, [r2]    ; ´æ´¢r0µÄÖµµ½rt_in
                                                            terrupt_from_thread
                                                            £¬¼´ÉÏÒ»¸öÏß³ÌÕ»Ö¸Õ
                                                            ëspµÄÖ¸Õë
  135 00000050         
  136 00000050         _reswitch
  137 00000050         ;ÉèÖÃrt_interrupt_to_threadµÄÖµ
  138 00000050 4A12            LDR              r2, =rt_interrupt_to_thread ; ¼
                                                            ÓÔØrt_interrupt_fro
                                                            m_threadµÄµØÖ·µ½r2
  139 00000052 6011            STR              r1, [r2]    ; ´æ´¢r1µÄÖµµ½rt_in
                                                            terrupt_from_thread
                                                            £¬¼´ÏÂÒ»¸öÏß³ÌÕ»Ö¸Õ
                                                            ëspµÄÖ¸Õë
  140 00000054         
  141 00000054         ;´¥·¢PendSVÒì³££¬ÊµÏÖÉÏÏÂÎÄÇĞ»»
  142 00000054 4815            LDR              r0, =NVIC_INT_CTRL
  143 00000056 F04F 5180       LDR              r1, =NVIC_PENDSVSET
  144 0000005A 6001            STR              r1, [r0]
  145 0000005C         
  146 0000005C         ; ×Ó³ÌĞò·µ»Ø
  147 0000005C 4770            BX               LR
  148 0000005E         
  149 0000005E         ; ×Ó³ÌĞò½áÊø
  150 0000005E                 ENDP
  151 0000005E         
  152 0000005E         
  153 0000005E         ;/*
  154 0000005E         ; *-----------------------------------------------------
                       ------------------
  155 0000005E         ; * void PendSV_Handler(void);
  156 0000005E         ; * r0 --> switch from thread stack
  157 0000005E         ; * r1 --> switch to thread stack
  158 0000005E         ; * psr, pc, lr, r12, r3, r2, r1, r0 are pushed into [fr
                       om] stack
  159 0000005E         ; *-----------------------------------------------------
                       ------------------
  160 0000005E         ; */



ARM Macro Assembler    Page 5 


  161 0000005E         
  162 0000005E         PendSV_Handler
                               PROC
  163 0000005E                 EXPORT           PendSV_Handler
  164 0000005E         
  165 0000005E         ;½ûÓÃÖĞ¶Ï£¬ÎªÁË±£»¤ÉÏÏÂÎÄÇĞ»»²»±»ÖĞ¶Ï
  166 0000005E F3EF 8210       MRS              r2, PRIMASK ;MRS:¡°Move to Regi
                                                            ster from Special r
                                                            egister¡±¡£½«PRIMAS
                                                            KµÄÖµ£¨µ±Ç°ÖĞ¶Ï×´Ì¬
                                                            £©ÒÆ¶¯µ½r2¼Ä´æÆ÷ÖĞ¡
                                                            £
  167 00000062 B672            CPSID            I           ;¹Ø±ÕIRQÖĞ¶Ï
  168 00000064         
  169 00000064         ;»ñÈ¡ÖĞ¶Ï±êÖ¾Î»£¬¿´¿´ÊÇ·ñÎª0
  170 00000064         ;¼ÓÔØrt_thread_switch_interrupt_flagµÄµØÖ·µ½r0
  171 00000064 480F            LDR              r0, =rt_thread_switch_interrupt
_flag
  172 00000066         ;¼ÓÔØrt_thread_switch_interrupt_flagµÄÖµµ½r1
  173 00000066 6801            LDR              r1, [r0]
  174 00000068         ;ÅĞ¶Ïr1µÄÖµÊÇ·ñÎª0£¬Îª0ÔòÌø×ªµ½pendsv_exit
  175 00000068 B191            CBZ              r1, pendsv_exit ; CBZ:"Compare 
                                                            and Branch on Zero"
                                                            ¡£Óë0±È½Ï£¬Èç¹ûÊÇ0Ô
                                                            òÌø×ª
  176 0000006A         
  177 0000006A         ;r1¼´rt_thread_switch_interrupt_flagµÄ±êÖ¾Î»²»Îª0
  178 0000006A F04F 0100       MOV              r1, #0x00
  179 0000006E         ;½«rt_thread_switch_interrupt_flagÇåÁã
  180 0000006E 6001            STR              r1,[r0]
  181 00000070         
  182 00000070         ;ÅĞ¶Ïrt_interrupt_from_threadµÄÖµÊÇ·ñÎª0
  183 00000070         ;¼ÓÔØrt_interrupt_from_threadµÄµØÖ·µ½r0
  184 00000070 480B            LDR              r0, =rt_interrupt_from_thread
  185 00000072         ;¼ÓÔØrt_interrupt_from_threadµÄÖµµ½r1
  186 00000072 6801            LDR              r1,[r0]
  187 00000074         ;ÅĞ¶Ïr1µÄÖµÊÇ·ñÎª0£¬Èç¹ûÊÇ0¾Í´ú±íÃ»ÓĞÕâÊÇµÚÒ»´ÎÏß³ÌÇĞ»»£
                       ¬²¢Ã»ÓĞÉÏÎÄĞèÒª±£´æ£¬Ö±½ÓÇĞ»»µ½ÏÂÎÄ¼´¿É£¬Ìø×ªµ½switch_to
                       _thread
  188 00000074 B129            CBZ              r1, switch_to_thread
  189 00000076         
  190 00000076         ; ========================== ÉÏÎÄ±£´æ ==================
                       ============
  191 00000076         ;µ±½øÈëPendSV_HandlerµÄÊ±ºò£¬ÉÏÒ»¸öÏß³ÌÖĞµÄ»·¾³±äÁ¿ÃÇ
  192 00000076         ;xPSR,PC(Ïß³ÌÈë¿ÚµØÖ·),r14,r12,r3,r2,r1,r0£¨Ïß³ÌµÄĞÎ²Î£©
                       ¶¼»á×Ô¶¯±£´æµ½Ïß³ÌµÄÕ»ÖĞ£¬Ê£ÏÂµÄr4~r11ĞèÒªÊÖ¶¯±£´æ
  193 00000076         ;»ñÈ¡Ïß³ÌµÄÕ»Ö¸Õëµ½r1
  194 00000076 F3EF 8109       MRS              r1, psp     ;psp:¡°Process Stac
                                                            k Pointer¡±´æ´¢µ±Ç°
                                                            Ïß³ÌµÄÕ»Ö¸Õë
  195 0000007A         ;½«r4~r11±£´æµ½r1Ö¸ÏòµÄµØÖ·£¨Ã¿²Ù×÷Ò»´Î£¬µØÖ·½«µİ¼õÒ»´Î£
                       ©
  196 0000007A E921 0FF0       STMFD            r1!,{r4- r11} ;STMFD: "Store Mu
                                                            ltiple Full Descend
                                                            ing"Ã¿´Î´æ´¢Íê³Éºó£
                                                            ¬µØÖ·¶¼»á¼õÉÙ32bit£
                                                            ¨1¸ö×Ö£©
  197 0000007E         ;¼ÓÔØr0µÄµØÖ·Ö¸ÏòµÄÖµµ½r0£¬¼´r0=rt_interrupt_from_thread
                       ¡£



ARM Macro Assembler    Page 6 


  198 0000007E 6800            LDR              r0, [r0]
  199 00000080         ;½«r1µÄÖµ´æ´¢µ½[r0]£¬¼´¸üĞÂÏß³ÌÕ»sp£¬ÕâÁ½¾äĞèÒªÌØ±ğÀí½âÒ
                       »ÏÂ
  200 00000080         ;½«r1µÄÖµ´æ´¢µ½[r0]£¬¼´r1µÄÖµ´æ´¢µ½[rt_interrupt_from_th
                       read]£¬ÎªÖ®ºóµÄÏß³Ì²Ù×÷»òÕß»Ö¸´×ö×¼±¸
  201 00000080 6001            STR              r1,[r0]
  202 00000082         
  203 00000082         ; ========================== ÏÂÎÄÇĞ»» ==================
                       ============
  204 00000082         switch_to_thread
  205 00000082         ;¼ÓÔØrt_interrupt_to_threadµÄÖµµ½r1
  206 00000082         ;rt_interrupt_to_threadÊÇÒ»¸öÈ«¾Ö±äÁ¿£¬ÀïÃæ±£´æµÄÊÇÏß³ÌÕ
                       »Ö¸ÕëspµÄµØÖ·£¬ÏÂÃæµÄÖ¸ÁîÊÇ¼ÓÔØµÄspµÄµØÖ·µÄµØÖ·
  207 00000082 4906            LDR              r1, =rt_interrupt_to_thread
  208 00000084         ;¼ÓÔØrt_interrupt_to_threadµÄÖµµ½r1£¬ÏÂÃæÖ¸ÁîÊÇ¼ÓÔØµÄspµ
                       ÄµØÖ·
  209 00000084 6809            LDR              r1, [r1]
  210 00000086         ;ÏÂÃæÖ¸ÁîÊÇ¼ÓÔØµÄsp
  211 00000086 6809            LDR              r1, [r1]
  212 00000088         
  213 00000088         ;½«Ïß³ÌÕ»Ö¸Õër1£¨²Ù×÷Ç°ÏÈµİ¼õ£©Ö¸ÏòµÄÄÚÈİ¼ÓÔØµ½cpu¼Ä´æÆ÷
                       r4~r11
  214 00000088 E8B1 0FF0       LDMFD            r1!,{r4- r11}
  215 0000008C         ;½«Ïß³ÌÕ»Ö¸Õë¸üĞÂµ½psp
  216 0000008C F381 8809       MSR              psp, r1
  217 00000090         
  218 00000090         pendsv_exit
  219 00000090         ;»Ö¸´ÖĞ¶Ï
  220 00000090 F382 8810       msr              PRIMASK, r2
  221 00000094         
  222 00000094         ;È·±£Òì³£·µ»ØÊ¹ÓÃµÄÕ»Ö¸ÕëÊÇpsp£¬¼´lr¼Ä´æÆ÷µÄÎ»2ÒªÎª1
  223 00000094         ;Í¨¹ı½«lr¼Ä´æÆ÷µÄµÚ2Î»ÉèÖÃÎª1£¨¼´Ìí¼Ó0x04£©£¬Ö¸ÁîÈ·±£ÔÚ´
                       ÓÒì³£·µ»ØÊ±£¬´¦ÀíÆ÷Ê¹ÓÃ½ø³ÌÕ»Ö¸Õë£¨psp£©¶ø²»ÊÇÖ÷Õ»Ö¸Õë£¨
                       msp£©¡£
  224 00000094         ;ARM´¦ÀíÆ÷ÓĞÁ½ÖÖÕ»Ö¸Õë£¬psp£¨½ø³ÌÕ»Ö¸Õë£©ºÍmsp£¨Ö÷Õ»Ö¸Õë
                       £©£¬ËüÃÇ·Ö±ğÓÃÓÚ²»Í¬µÄÄ¿µÄ¡£
  225 00000094         ;pspÍ¨³£ÓÃÓÚÆÕÍ¨µÄÓ¦ÓÃ³ÌĞòÏß³Ì£¬¶ømspÓÃÓÚÒì³£´¦ÀíºÍÏµÍ³¼
                       ¶±ğµÄ¹¦ÄÜ¡£
  226 00000094         ;lr£¨Á´½Ó¼Ä´æÆ÷£©Í¨³£ÓÃÓÚ´æ´¢º¯Êı·µ»ØµØÖ·¡£µ«ÔÚÖĞ¶Ï»òÒì³
                       £´¦ÀíÊ±£¬lrµÄÓÃÍ¾»áÂÔÓĞ²»Í¬¡£
  227 00000094         ;µ±·¢ÉúÒì³£Ê±£¬lr»á´æ´¢Ò»Ğ©¶îÍâµÄĞÅÏ¢£¬°ïÖú´¦ÀíÆ÷¾ö¶¨Èçº
                       Î´ÓÒì³£·µ»Ø¡£
  228 00000094 F04E 0E04       ORR              lr, lr, #0x04
  229 00000098         ;Òì³£·µ»Ø£¬Õâ¸öÊ±ºòÕ»ÖĞµÄÊ£ÏÂÄÚÈİ£¨xPSR£¬PC, r14£¬r12£¬r
                       3£¬r2£¬r1£¬r0£©»á×Ô¶¯¼ÓÔØµ½CPU¼Ä´æÆ÷
  230 00000098         ;Í¬Ê±£¬pspµÄÖµÒ²»á¸üĞÂ£¬Ö¸ÏòÏß³ÌÕ»µÄÕ»¶¥
  231 00000098 4770            BX               lr
  232 0000009A         
  233 0000009A         ;×Ó³ÌĞòPendsv_Handler½áÊø
  234 0000009A                 ENDP
  235 0000009A         
  236 0000009A         
  237 0000009A         
  238 0000009A         
  239 0000009A         
  240 0000009A 00 00           ALIGN            4
  241 0000009C         
  242 0000009C                 END
              00000000 



ARM Macro Assembler    Page 7 


              00000000 
              00000000 
              E000ED20 
              E000ED04 
Command Line: --debug --xref --diag_suppress=9931 --cpu=Cortex-M3 --apcs=interw
ork --depend=..\..\output\context_rvds.d -o..\..\output\context_rvds.o -I.\RTE\
_TFTLCD -ID:\Users\HawkJ\AppData\Local\Arm\Packs\Keil\STM32F1xx_DFP\2.4.1\Devic
e\Include -ID:\Keil_v5\ARM\CMSIS\Include --predefine="__UVISION_VERSION SETA 52
8" --predefine="STM32F10X_HD SETA 1" --list=..\..\output\context_rvds.lst ..\..
\Rt-Thread\Src\context_rvds.s



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

.text 00000000

Symbol: .text
   Definitions
      At line 27 in file ..\..\Rt-Thread\Src\context_rvds.s
   Uses
      None
Comment: .text unused
PendSV_Handler 0000005E

Symbol: PendSV_Handler
   Definitions
      At line 162 in file ..\..\Rt-Thread\Src\context_rvds.s
   Uses
      At line 163 in file ..\..\Rt-Thread\Src\context_rvds.s
Comment: PendSV_Handler used once
_reswitch 00000050

Symbol: _reswitch
   Definitions
      At line 136 in file ..\..\Rt-Thread\Src\context_rvds.s
   Uses
      At line 126 in file ..\..\Rt-Thread\Src\context_rvds.s
Comment: _reswitch used once
pendsv_exit 00000090

Symbol: pendsv_exit
   Definitions
      At line 218 in file ..\..\Rt-Thread\Src\context_rvds.s
   Uses
      At line 175 in file ..\..\Rt-Thread\Src\context_rvds.s
Comment: pendsv_exit used once
rt_hw_context_switch 0000003E

Symbol: rt_hw_context_switch
   Definitions
      At line 116 in file ..\..\Rt-Thread\Src\context_rvds.s
   Uses
      At line 117 in file ..\..\Rt-Thread\Src\context_rvds.s
Comment: rt_hw_context_switch used once
rt_hw_context_switch_to 0000000E

Symbol: rt_hw_context_switch_to
   Definitions
      At line 61 in file ..\..\Rt-Thread\Src\context_rvds.s
   Uses
      At line 64 in file ..\..\Rt-Thread\Src\context_rvds.s
Comment: rt_hw_context_switch_to used once
rt_hw_interrupt_disable 00000000

Symbol: rt_hw_interrupt_disable
   Definitions
      At line 36 in file ..\..\Rt-Thread\Src\context_rvds.s
   Uses
      At line 37 in file ..\..\Rt-Thread\Src\context_rvds.s
Comment: rt_hw_interrupt_disable used once
rt_hw_interrupt_enable 00000008

Symbol: rt_hw_interrupt_enable



ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Relocatable symbols

   Definitions
      At line 48 in file ..\..\Rt-Thread\Src\context_rvds.s
   Uses
      At line 49 in file ..\..\Rt-Thread\Src\context_rvds.s
Comment: rt_hw_interrupt_enable used once
switch_to_thread 00000082

Symbol: switch_to_thread
   Definitions
      At line 204 in file ..\..\Rt-Thread\Src\context_rvds.s
   Uses
      At line 188 in file ..\..\Rt-Thread\Src\context_rvds.s
Comment: switch_to_thread used once
9 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Absolute symbols

NVIC_INT_CTRL E000ED04

Symbol: NVIC_INT_CTRL
   Definitions
      At line 17 in file ..\..\Rt-Thread\Src\context_rvds.s
   Uses
      At line 97 in file ..\..\Rt-Thread\Src\context_rvds.s
      At line 142 in file ..\..\Rt-Thread\Src\context_rvds.s

NVIC_PENDSVSET 10000000

Symbol: NVIC_PENDSVSET
   Definitions
      At line 20 in file ..\..\Rt-Thread\Src\context_rvds.s
   Uses
      At line 98 in file ..\..\Rt-Thread\Src\context_rvds.s
      At line 143 in file ..\..\Rt-Thread\Src\context_rvds.s

NVIC_PENDSV_PRI 00FF0000

Symbol: NVIC_PENDSV_PRI
   Definitions
      At line 19 in file ..\..\Rt-Thread\Src\context_rvds.s
   Uses
      At line 91 in file ..\..\Rt-Thread\Src\context_rvds.s
Comment: NVIC_PENDSV_PRI used once
NVIC_SYSPRI2 E000ED20

Symbol: NVIC_SYSPRI2
   Definitions
      At line 18 in file ..\..\Rt-Thread\Src\context_rvds.s
   Uses
      At line 90 in file ..\..\Rt-Thread\Src\context_rvds.s
Comment: NVIC_SYSPRI2 used once
SCB_VTOR E000ED08

Symbol: SCB_VTOR
   Definitions
      At line 16 in file ..\..\Rt-Thread\Src\context_rvds.s
   Uses
      None
Comment: SCB_VTOR unused
5 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
External symbols

rt_interrupt_from_thread 00000000

Symbol: rt_interrupt_from_thread
   Definitions
      At line 5 in file ..\..\Rt-Thread\Src\context_rvds.s
   Uses
      At line 75 in file ..\..\Rt-Thread\Src\context_rvds.s
      At line 133 in file ..\..\Rt-Thread\Src\context_rvds.s
      At line 184 in file ..\..\Rt-Thread\Src\context_rvds.s

rt_interrupt_to_thread 00000000

Symbol: rt_interrupt_to_thread
   Definitions
      At line 7 in file ..\..\Rt-Thread\Src\context_rvds.s
   Uses
      At line 68 in file ..\..\Rt-Thread\Src\context_rvds.s
      At line 138 in file ..\..\Rt-Thread\Src\context_rvds.s
      At line 207 in file ..\..\Rt-Thread\Src\context_rvds.s

rt_thread_switch_interrupt_flag 00000000

Symbol: rt_thread_switch_interrupt_flag
   Definitions
      At line 9 in file ..\..\Rt-Thread\Src\context_rvds.s
   Uses
      At line 83 in file ..\..\Rt-Thread\Src\context_rvds.s
      At line 121 in file ..\..\Rt-Thread\Src\context_rvds.s
      At line 171 in file ..\..\Rt-Thread\Src\context_rvds.s

3 symbols
351 symbols in table
